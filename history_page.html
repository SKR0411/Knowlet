<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recently Visited Notes History</title>
    <link rel="stylesheet" href="assets/styles/nav.css">
    <link rel="stylesheet" href="assets/styles/history_page.css"/>
    
 </head>
<body>

    <div class="container">
        <h1>üìñ Recently Visited Notes</h1>
        <h2>Your Unit History (Last 15 Pages)</h2>
    
        <ul id="history-list">
            <li class="empty-message">Loading history...</li>
        </ul>
    </div>    
    <nav class="bottom-nav">
        <a href="index" class="nav-item">
            <span class="icon">üè†</span>
            <span class="text">Home</span>
        </a>
        <a href="favourites_page" class="nav-item">
            <span class="icon">üåü</span>
            <span class="text">Favourite</span>
        </a>
        <a href="history_page" class="nav-item">
            <span class="icon">üìú</span>
            <span class="text">History</span>
        </a>
        <a href="profile" class="nav-item">
            <span class="icon"><img id="profile-btn" src="assets/images/demo_pp.png"></span>
            <span class="text">Profile</span>
        </a>
    </nav>
    
    <script src="assets/scripts/nav.js"></script>
    <script>
    (function () {
        const HISTORY_KEY = 'unit_page_history';
        const historyList = document.getElementById('history-list');
    
        // Helper function to format the timestamp
        function formatTime(timestamp) {
            if (!timestamp) return '';
            const date = new Date(timestamp);
            return date.toLocaleString();
        }
    
        function renderHistory() {
            const history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
            historyList.innerHTML = ''; // Clear loading message
    
            if (history.length === 0) {
                historyList.innerHTML = '<li class="empty-message">Your visit history is empty. Start exploring the unit pages!</li>';
                return;
            }
    
            history.forEach(item => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
        <a href="${item.url}" title="Go to ${item.title}">${item.title}</a>
        <span class="timestamp">Visited: ${formatTime(item.timestamp)}</span>
                `;
                historyList.appendChild(listItem);
            });
        }
    
        renderHistory();
    })();
    </script>

</body>
</html>
